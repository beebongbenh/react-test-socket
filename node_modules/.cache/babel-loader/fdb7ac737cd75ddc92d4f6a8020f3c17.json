{"ast":null,"code":"var _jsxFileName = \"/home/bee/Desktop/nobisoft/test_socketio/react-socketio-notification/client/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { io } from \"socket.io-client\";\nimport { TextField, Button } from \"@mui/material\";\n// import local url\nimport { sendNotification } from \"./services/sendNotification.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [name, setName] = useState(undefined);\n  const nameRef = useRef();\n  const friendNameRef = useRef();\n  useEffect(() => {\n    if (name) {\n      const socket = io(\"http://localhost:8989/public/noti/notification\", {\n        extraHeaders: {\n          Authorization: name\n        }\n      });\n      // socket.on(\"connect_error\", (e) => {\n      //   console.log(e);\n      //   // socket.auth.token = \"abcd\";\n      //   // socket.connect();\n      // });\n      socket.on(\"connect\", () => {\n        socket.on(\"notification\", arg => {\n          toast(arg);\n        });\n      });\n      socket.on(\"disconnect\", function () {\n        //Your Code Here\n        toast(\"Server disconnected\");\n      });\n      return () => {\n        // before the component is destroyed\n        // unbind all event handlers used in this component\n        socket.off(\"connect\");\n        socket.off(\"disconnect\");\n        socket.off(\"notification\");\n      };\n    }\n  }, [name]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\"\n      },\n      children: !name ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"outlined-basic\",\n          label: \"Your name\",\n          inputRef: nameRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            margin: \"5px\"\n          },\n          variant: \"contained\",\n          onClick: () => {\n            setName(nameRef.current.value);\n          },\n          size: \"large\",\n          children: \"Enter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"outlined-basic\",\n          label: \"Your friend name\",\n          inputRef: friendNameRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          style: {\n            margin: \"5px\"\n          },\n          onClick: () => {\n            sendNotification(name, friendNameRef.current.value);\n          },\n          children: \"send notification\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"hqBvJXtOJnA5V4KlEfubGzK2ctI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","useRef","toast","io","TextField","Button","sendNotification","App","name","setName","undefined","nameRef","friendNameRef","socket","extraHeaders","Authorization","on","arg","off","position","top","left","transform","margin","current","value"],"sources":["/home/bee/Desktop/nobisoft/test_socketio/react-socketio-notification/client/src/App.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { io } from \"socket.io-client\";\nimport { TextField, Button } from \"@mui/material\";\n// import local url\nimport { sendNotification } from \"./services/sendNotification.js\";\n\nfunction App() {\n  const [name, setName] = useState(undefined);\n  const nameRef = useRef();\n  const friendNameRef = useRef();\n\n  useEffect(() => {\n    if (name) {\n      const socket = io(\"http://localhost:8989/public/noti/notification\", {\n        extraHeaders: {\n          Authorization: name,\n        },\n      });\n      // socket.on(\"connect_error\", (e) => {\n      //   console.log(e);\n      //   // socket.auth.token = \"abcd\";\n      //   // socket.connect();\n      // });\n      socket.on(\"connect\", () => {\n        socket.on(\"notification\", (arg) => {\n          toast(arg);\n        });\n      });\n      socket.on(\"disconnect\", function () {\n        //Your Code Here\n        toast(\"Server disconnected\");\n      });\n\n      return () => {\n        // before the component is destroyed\n        // unbind all event handlers used in this component\n        socket.off(\"connect\");\n        socket.off(\"disconnect\");\n        socket.off(\"notification\");\n      };\n    }\n  }, [name]);\n\n  return (\n    <div className=\"App\">\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n        }}\n      >\n        {!name ? (\n          <>\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Your name\"\n              inputRef={nameRef}\n            />\n            <Button\n              style={{ margin: \"5px\" }}\n              variant=\"contained\"\n              onClick={() => {\n                setName(nameRef.current.value);\n              }}\n              size=\"large\"\n            >\n              Enter\n            </Button>\n          </>\n        ) : (\n          <>\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Your friend name\"\n              inputRef={friendNameRef}\n            />\n            <Button\n              variant=\"contained\"\n              style={{ margin: \"5px\" }}\n              onClick={() => {\n                sendNotification(name, friendNameRef.current.value);\n              }}\n            >\n              send notification\n            </Button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACnD,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAASC,EAAE,QAAQ,kBAAkB;AACrC,SAASC,SAAS,EAAEC,MAAM,QAAQ,eAAe;AACjD;AACA,SAASC,gBAAgB,QAAQ,gCAAgC;AAAC;AAAA;AAElE,SAASC,GAAG,GAAG;EAAA;EACb,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAACU,SAAS,CAAC;EAC3C,MAAMC,OAAO,GAAGV,MAAM,EAAE;EACxB,MAAMW,aAAa,GAAGX,MAAM,EAAE;EAE9BF,SAAS,CAAC,MAAM;IACd,IAAIS,IAAI,EAAE;MACR,MAAMK,MAAM,GAAGV,EAAE,CAAC,gDAAgD,EAAE;QAClEW,YAAY,EAAE;UACZC,aAAa,EAAEP;QACjB;MACF,CAAC,CAAC;MACF;MACA;MACA;MACA;MACA;MACAK,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,MAAM;QACzBH,MAAM,CAACG,EAAE,CAAC,cAAc,EAAGC,GAAG,IAAK;UACjCf,KAAK,CAACe,GAAG,CAAC;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;MACFJ,MAAM,CAACG,EAAE,CAAC,YAAY,EAAE,YAAY;QAClC;QACAd,KAAK,CAAC,qBAAqB,CAAC;MAC9B,CAAC,CAAC;MAEF,OAAO,MAAM;QACX;QACA;QACAW,MAAM,CAACK,GAAG,CAAC,SAAS,CAAC;QACrBL,MAAM,CAACK,GAAG,CAAC,YAAY,CAAC;QACxBL,MAAM,CAACK,GAAG,CAAC,cAAc,CAAC;MAC5B,CAAC;IACH;EACF,CAAC,EAAE,CAACV,IAAI,CAAC,CAAC;EAEV,oBACE;IAAK,SAAS,EAAC,KAAK;IAAA,uBAClB;MACE,KAAK,EAAE;QACLW,QAAQ,EAAE,UAAU;QACpBC,GAAG,EAAE,KAAK;QACVC,IAAI,EAAE,KAAK;QACXC,SAAS,EAAE;MACb,CAAE;MAAA,UAED,CAACd,IAAI,gBACJ;QAAA,wBACE,QAAC,SAAS;UACR,EAAE,EAAC,gBAAgB;UACnB,KAAK,EAAC,WAAW;UACjB,QAAQ,EAAEG;QAAQ;UAAA;UAAA;UAAA;QAAA,QAClB,eACF,QAAC,MAAM;UACL,KAAK,EAAE;YAAEY,MAAM,EAAE;UAAM,CAAE;UACzB,OAAO,EAAC,WAAW;UACnB,OAAO,EAAE,MAAM;YACbd,OAAO,CAACE,OAAO,CAACa,OAAO,CAACC,KAAK,CAAC;UAChC,CAAE;UACF,IAAI,EAAC,OAAO;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAGL;MAAA,gBACR,gBAEH;QAAA,wBACE,QAAC,SAAS;UACR,EAAE,EAAC,gBAAgB;UACnB,KAAK,EAAC,kBAAkB;UACxB,QAAQ,EAAEb;QAAc;UAAA;UAAA;UAAA;QAAA,QACxB,eACF,QAAC,MAAM;UACL,OAAO,EAAC,WAAW;UACnB,KAAK,EAAE;YAAEW,MAAM,EAAE;UAAM,CAAE;UACzB,OAAO,EAAE,MAAM;YACbjB,gBAAgB,CAACE,IAAI,EAAEI,aAAa,CAACY,OAAO,CAACC,KAAK,CAAC;UACrD,CAAE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAGK;MAAA;IAEZ;MAAA;MAAA;MAAA;IAAA;EACG;IAAA;IAAA;IAAA;EAAA,QACF;AAEV;AAAC,GAtFQlB,GAAG;AAAA,KAAHA,GAAG;AAwFZ,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module"}