{"ast":null,"code":"import _slicedToArray from\"/home/bee/Desktop/nobisoft/test_socketio/react-socketio-notification/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useRef}from\"react\";import toast from\"react-hot-toast\";import{io}from\"socket.io-client\";import{TextField,Button}from\"@mui/material\";// import local url\nimport{sendNotification}from\"./services/sendNotification.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var nameRef=useRef();var friendNameRef=useRef();useEffect(function(){if(name){var socket=io(\"http://localhost:8989/public/noti/notification\",{extraHeaders:{Authorization:name}});socket.on(\"connect_error\",function(e){console.log(e);// socket.auth.token = \"abcd\";\n// socket.connect();\n});socket.on(\"connect\",function(){socket.on(\"notification\",function(arg){console.log(1);toast(arg);});});socket.on(\"disconnect\",function(){//Your Code Here\ntoast(\"Server disconnected\");});return function(){// before the component is destroyed\n// unbind all event handlers used in this component\nsocket.off(\"connect\");socket.off(\"disconnect\");socket.off(\"notification\");};}},[name]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\"},children:!name?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Your name\",inputRef:nameRef}),/*#__PURE__*/_jsx(Button,{style:{margin:\"5px\"},variant:\"contained\",onClick:function onClick(){setName(nameRef.current.value);},size:\"large\",children:\"Enter\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Your friend name\",inputRef:friendNameRef}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",style:{margin:\"5px\"},onClick:function onClick(){sendNotification(name,friendNameRef.current.value);},children:\"send notification\"})]})})});}export default App;","map":{"version":3,"names":["useEffect","useState","useRef","toast","io","TextField","Button","sendNotification","App","undefined","name","setName","nameRef","friendNameRef","socket","extraHeaders","Authorization","on","e","console","log","arg","off","position","top","left","transform","margin","current","value"],"sources":["/home/bee/Desktop/nobisoft/test_socketio/react-socketio-notification/client/src/App.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { io } from \"socket.io-client\";\nimport { TextField, Button } from \"@mui/material\";\n// import local url\nimport { sendNotification } from \"./services/sendNotification.js\";\n\nfunction App() {\n  const [name, setName] = useState(undefined);\n  const nameRef = useRef();\n  const friendNameRef = useRef();\n\n  useEffect(() => {\n    if (name) {\n      const socket = io(\"http://localhost:8989/public/noti/notification\", {\n        extraHeaders: {\n          Authorization: name,\n        },\n      });\n      socket.on(\"connect_error\", (e) => {\n        console.log(e);\n        // socket.auth.token = \"abcd\";\n        // socket.connect();\n      });\n      socket.on(\"connect\", () => {\n        socket.on(\"notification\", (arg) => {\n          console.log(1);\n          toast(arg);\n        });\n      });\n      socket.on(\"disconnect\", function () {\n        //Your Code Here\n        toast(\"Server disconnected\");\n      });\n\n      return () => {\n        // before the component is destroyed\n        // unbind all event handlers used in this component\n        socket.off(\"connect\");\n        socket.off(\"disconnect\");\n        socket.off(\"notification\");\n      };\n    }\n  }, [name]);\n\n  return (\n    <div className=\"App\">\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n        }}\n      >\n        {!name ? (\n          <>\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Your name\"\n              inputRef={nameRef}\n            />\n            <Button\n              style={{ margin: \"5px\" }}\n              variant=\"contained\"\n              onClick={() => {\n                setName(nameRef.current.value);\n              }}\n              size=\"large\"\n            >\n              Enter\n            </Button>\n          </>\n        ) : (\n          <>\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Your friend name\"\n              inputRef={friendNameRef}\n            />\n            <Button\n              variant=\"contained\"\n              style={{ margin: \"5px\" }}\n              onClick={() => {\n                sendNotification(name, friendNameRef.current.value);\n              }}\n            >\n              send notification\n            </Button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"iKAAA,OAASA,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CACnD,MAAOC,MAAK,KAAM,iBAAiB,CACnC,OAASC,EAAE,KAAQ,kBAAkB,CACrC,OAASC,SAAS,CAAEC,MAAM,KAAQ,eAAe,CACjD;AACA,OAASC,gBAAgB,KAAQ,gCAAgC,CAAC,6IAElE,QAASC,IAAG,EAAG,CACb,cAAwBP,QAAQ,CAACQ,SAAS,CAAC,wCAApCC,IAAI,eAAEC,OAAO,eACpB,GAAMC,QAAO,CAAGV,MAAM,EAAE,CACxB,GAAMW,cAAa,CAAGX,MAAM,EAAE,CAE9BF,SAAS,CAAC,UAAM,CACd,GAAIU,IAAI,CAAE,CACR,GAAMI,OAAM,CAAGV,EAAE,CAAC,gDAAgD,CAAE,CAClEW,YAAY,CAAE,CACZC,aAAa,CAAEN,IACjB,CACF,CAAC,CAAC,CACFI,MAAM,CAACG,EAAE,CAAC,eAAe,CAAE,SAACC,CAAC,CAAK,CAChCC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CACd;AACA;AACF,CAAC,CAAC,CACFJ,MAAM,CAACG,EAAE,CAAC,SAAS,CAAE,UAAM,CACzBH,MAAM,CAACG,EAAE,CAAC,cAAc,CAAE,SAACI,GAAG,CAAK,CACjCF,OAAO,CAACC,GAAG,CAAC,CAAC,CAAC,CACdjB,KAAK,CAACkB,GAAG,CAAC,CACZ,CAAC,CAAC,CACJ,CAAC,CAAC,CACFP,MAAM,CAACG,EAAE,CAAC,YAAY,CAAE,UAAY,CAClC;AACAd,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CAAC,CAAC,CAEF,MAAO,WAAM,CACX;AACA;AACAW,MAAM,CAACQ,GAAG,CAAC,SAAS,CAAC,CACrBR,MAAM,CAACQ,GAAG,CAAC,YAAY,CAAC,CACxBR,MAAM,CAACQ,GAAG,CAAC,cAAc,CAAC,CAC5B,CAAC,CACH,CACF,CAAC,CAAE,CAACZ,IAAI,CAAC,CAAC,CAEV,mBACE,YAAK,SAAS,CAAC,KAAK,uBAClB,YACE,KAAK,CAAE,CACLa,QAAQ,CAAE,UAAU,CACpBC,GAAG,CAAE,KAAK,CACVC,IAAI,CAAE,KAAK,CACXC,SAAS,CAAE,uBACb,CAAE,UAED,CAAChB,IAAI,cACJ,wCACE,KAAC,SAAS,EACR,EAAE,CAAC,gBAAgB,CACnB,KAAK,CAAC,WAAW,CACjB,QAAQ,CAAEE,OAAQ,EAClB,cACF,KAAC,MAAM,EACL,KAAK,CAAE,CAAEe,MAAM,CAAE,KAAM,CAAE,CACzB,OAAO,CAAC,WAAW,CACnB,OAAO,CAAE,kBAAM,CACbhB,OAAO,CAACC,OAAO,CAACgB,OAAO,CAACC,KAAK,CAAC,CAChC,CAAE,CACF,IAAI,CAAC,OAAO,mBAGL,GACR,cAEH,wCACE,KAAC,SAAS,EACR,EAAE,CAAC,gBAAgB,CACnB,KAAK,CAAC,kBAAkB,CACxB,QAAQ,CAAEhB,aAAc,EACxB,cACF,KAAC,MAAM,EACL,OAAO,CAAC,WAAW,CACnB,KAAK,CAAE,CAAEc,MAAM,CAAE,KAAM,CAAE,CACzB,OAAO,CAAE,kBAAM,CACbpB,gBAAgB,CAACG,IAAI,CAAEG,aAAa,CAACe,OAAO,CAACC,KAAK,CAAC,CACrD,CAAE,+BAGK,GAEZ,EACG,EACF,CAEV,CAEA,cAAerB,IAAG"},"metadata":{},"sourceType":"module"}